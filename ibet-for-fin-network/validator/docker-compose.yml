version: '3'
services:
  ibetforfin-validator-0:
    hostname: ibetforfin-validator-0
    build:
      context: .
    ports:
      - '30303:30303'
      - '8545:8545'
    environment:
      - PRIVATE_CONFIG=ignore
      - rpccorsdomain=*
      - rpcvhosts=*
      - nodekeyhex=0e8bf21abe1a0de09ea095f9e6b052760186e2f3cabad1d057d392d448a716b9
    networks:
      app_net:
        ipv4_address: 172.16.239.10
    restart: always
    command:
      - /bin/sh
      - -c
      - |
        mkdir -p /eth/geth
        echo '{"config":{"chainId":1010032,"homesteadBlock":1,"eip150Block":2,"eip150Hash":"0x0000000000000000000000000000000000000000000000000000000000000000","eip155Block":3,"eip158Block":3,"byzantiumBlock":3,"istanbul":{"epoch":30000,"policy":0},"isQuorum":true},"nonce":"0x0","timestamp":"0x5f32810a","extraData":"0x0000000000000000000000000000000000000000000000000000000000000000f8d9f893949a364aac9d797b74c35a25902615c94380d6637694c61f5a293daebd629f53ca54926a0d3c79620f2094f661459954850ac9474b8a169e88c8f6d756ba29942c77361907acc51636a37cf1548db5e136e00855946117a8bb871b5b2164c6f825ffcc0ddda9d54de0941a8769d6d5fc9f44c0862f2016ddd76d647b7daa94df7d8ab7cd322ae1a7e8794330471712d566b6f3b8410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c0","gasLimit":"0x2faf0800","difficulty":"0x1","mixHash":"0x63746963616c2062797a616e74696e65206661756c7420746f6c6572616e6365","coinbase":"0x0000000000000000000000000000000000000000","constantinopleBlock":0,"petersburgBlock":0,"istanbulBlock":0,"alloc":{"1a8769d6d5fc9f44c0862f2016ddd76d647b7daa":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"2c77361907acc51636a37cf1548db5e136e00855":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"6117a8bb871b5b2164c6f825ffcc0ddda9d54de0":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"9a364aac9d797b74c35a25902615c94380d66376":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"c61f5a293daebd629f53ca54926a0d3c79620f20":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"df7d8ab7cd322ae1a7e8794330471712d566b6f3":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"f661459954850ac9474b8a169e88c8f6d756ba29":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"}},"number":"0x0","gasUsed":"0x0","parentHash":"0x0000000000000000000000000000000000000000000000000000000000000000"}' > /eth/genesis.json
        echo '["enode://49f681391747cb6771e510f2512e9fec599ed526ade06df72dd0b7500aa4312d3a8a29a9bf901574a03a83835158e8ee68b38ab348d489601bb2b053dbd282d7@172.16.239.10:30303","enode://6d3fe7806fb71beb306058af7913ab8eae30b6073d1a433dd003592a2429b7c55734f08de694770f08fc15805e0120a0171b2576e49c142f27fb6bd09a5a751d@172.16.239.11:30303","enode://daacd768d1e7bcb7c6793d06287a4e2ff0db4ddff2c21a031619d689c76b053379d84b9a406605c5d0c1a80e8b0c34393f9ae0a54c54e0c6ee70bc8c8478cccd@172.16.239.12:30303","enode://4b273954e7654e95c4e04eca2253a3d40597b66c5a0ec7df01ef606d723faa104ce91f44888b9fa71d0ad15d1cc1064ed94f4af2791d49af376af3765b96999d@172.16.239.13:30303","enode://38c3fa5b70e8f11225bc318ae1ed32dbb544d08a272b4ef527848c259f50cc325e77ccbb291a5a4f7929569e9a62e1d660b269c767cbb76ebef538ba11b98f6e@172.16.239.14:30303","enode://087a9400c4a11c2a92444e013fb3b64b0942cb782c3e73be1561f3e55e46573e5d7049e9947d55a325ad92b8f5d32c86c9a6571d17b5459bc2b39e59bfa70d03@172.16.239.15:30303","enode://85eb8265885217cd91f435e598dcd2dd6bfe3656feed38854e687ecba208aacb1b7a7ff11a06ee10bf6451db0a7f169aee83f3972bb049ca233e8cf6fdcad904@172.16.239.16:30303"]' > /eth/geth/static-nodes.json
        geth --datadir "/eth" --nousb init "/eth/genesis.json" 
        /run.sh
  ibetforfin-validator-1:
    hostname: ibetforfin-validator-1
    build:
      context: .
    ports:
      - '30304:30303'
      - '8546:8545'
    environment:
      - PRIVATE_CONFIG=ignore
      - rpccorsdomain=*
      - rpcvhosts=*
      - nodekeyhex=caddf71be2a194e8396675745234eeba11bf6f5137256d69fe760b101bb2874c
    networks:
      app_net:
        ipv4_address: 172.16.239.11
    restart: always
    command:
      - /bin/sh
      - -c
      - |
        mkdir -p /eth/geth
        echo '{"config":{"chainId":1010032,"homesteadBlock":1,"eip150Block":2,"eip150Hash":"0x0000000000000000000000000000000000000000000000000000000000000000","eip155Block":3,"eip158Block":3,"byzantiumBlock":3,"istanbul":{"epoch":30000,"policy":0},"isQuorum":true},"nonce":"0x0","timestamp":"0x5f32810a","extraData":"0x0000000000000000000000000000000000000000000000000000000000000000f8d9f893949a364aac9d797b74c35a25902615c94380d6637694c61f5a293daebd629f53ca54926a0d3c79620f2094f661459954850ac9474b8a169e88c8f6d756ba29942c77361907acc51636a37cf1548db5e136e00855946117a8bb871b5b2164c6f825ffcc0ddda9d54de0941a8769d6d5fc9f44c0862f2016ddd76d647b7daa94df7d8ab7cd322ae1a7e8794330471712d566b6f3b8410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c0","gasLimit":"0x2faf0800","difficulty":"0x1","mixHash":"0x63746963616c2062797a616e74696e65206661756c7420746f6c6572616e6365","coinbase":"0x0000000000000000000000000000000000000000","constantinopleBlock":0,"petersburgBlock":0,"istanbulBlock":0,"alloc":{"1a8769d6d5fc9f44c0862f2016ddd76d647b7daa":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"2c77361907acc51636a37cf1548db5e136e00855":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"6117a8bb871b5b2164c6f825ffcc0ddda9d54de0":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"9a364aac9d797b74c35a25902615c94380d66376":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"c61f5a293daebd629f53ca54926a0d3c79620f20":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"df7d8ab7cd322ae1a7e8794330471712d566b6f3":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"f661459954850ac9474b8a169e88c8f6d756ba29":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"}},"number":"0x0","gasUsed":"0x0","parentHash":"0x0000000000000000000000000000000000000000000000000000000000000000"}' > /eth/genesis.json
        echo '["enode://49f681391747cb6771e510f2512e9fec599ed526ade06df72dd0b7500aa4312d3a8a29a9bf901574a03a83835158e8ee68b38ab348d489601bb2b053dbd282d7@172.16.239.10:30303","enode://6d3fe7806fb71beb306058af7913ab8eae30b6073d1a433dd003592a2429b7c55734f08de694770f08fc15805e0120a0171b2576e49c142f27fb6bd09a5a751d@172.16.239.11:30303","enode://daacd768d1e7bcb7c6793d06287a4e2ff0db4ddff2c21a031619d689c76b053379d84b9a406605c5d0c1a80e8b0c34393f9ae0a54c54e0c6ee70bc8c8478cccd@172.16.239.12:30303","enode://4b273954e7654e95c4e04eca2253a3d40597b66c5a0ec7df01ef606d723faa104ce91f44888b9fa71d0ad15d1cc1064ed94f4af2791d49af376af3765b96999d@172.16.239.13:30303","enode://38c3fa5b70e8f11225bc318ae1ed32dbb544d08a272b4ef527848c259f50cc325e77ccbb291a5a4f7929569e9a62e1d660b269c767cbb76ebef538ba11b98f6e@172.16.239.14:30303","enode://087a9400c4a11c2a92444e013fb3b64b0942cb782c3e73be1561f3e55e46573e5d7049e9947d55a325ad92b8f5d32c86c9a6571d17b5459bc2b39e59bfa70d03@172.16.239.15:30303","enode://85eb8265885217cd91f435e598dcd2dd6bfe3656feed38854e687ecba208aacb1b7a7ff11a06ee10bf6451db0a7f169aee83f3972bb049ca233e8cf6fdcad904@172.16.239.16:30303"]' > /eth/geth/static-nodes.json
        geth --datadir "/eth" --nousb init "/eth/genesis.json"
        /run.sh
  ibetforfin-validator-2:
    hostname: ibetforfin-validator-2
    build:
      context: .
    ports:
      - '30305:30303'
      - '8547:8545'
    environment:
      - PRIVATE_CONFIG=ignore
      - rpccorsdomain=*
      - rpcvhosts=*
      - nodekeyhex=9da656c49d30f39c7cba892c766906ae784469c8d164dd2f4ad5bca31a431c76
    networks:
      app_net:
        ipv4_address: 172.16.239.12
    restart: always
    command:
      - /bin/sh
      - -c
      - |
        mkdir -p /eth/geth
        echo '{"config":{"chainId":1010032,"homesteadBlock":1,"eip150Block":2,"eip150Hash":"0x0000000000000000000000000000000000000000000000000000000000000000","eip155Block":3,"eip158Block":3,"byzantiumBlock":3,"istanbul":{"epoch":30000,"policy":0},"isQuorum":true},"nonce":"0x0","timestamp":"0x5f32810a","extraData":"0x0000000000000000000000000000000000000000000000000000000000000000f8d9f893949a364aac9d797b74c35a25902615c94380d6637694c61f5a293daebd629f53ca54926a0d3c79620f2094f661459954850ac9474b8a169e88c8f6d756ba29942c77361907acc51636a37cf1548db5e136e00855946117a8bb871b5b2164c6f825ffcc0ddda9d54de0941a8769d6d5fc9f44c0862f2016ddd76d647b7daa94df7d8ab7cd322ae1a7e8794330471712d566b6f3b8410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c0","gasLimit":"0x2faf0800","difficulty":"0x1","mixHash":"0x63746963616c2062797a616e74696e65206661756c7420746f6c6572616e6365","coinbase":"0x0000000000000000000000000000000000000000","constantinopleBlock":0,"petersburgBlock":0,"istanbulBlock":0,"alloc":{"1a8769d6d5fc9f44c0862f2016ddd76d647b7daa":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"2c77361907acc51636a37cf1548db5e136e00855":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"6117a8bb871b5b2164c6f825ffcc0ddda9d54de0":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"9a364aac9d797b74c35a25902615c94380d66376":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"c61f5a293daebd629f53ca54926a0d3c79620f20":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"df7d8ab7cd322ae1a7e8794330471712d566b6f3":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"f661459954850ac9474b8a169e88c8f6d756ba29":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"}},"number":"0x0","gasUsed":"0x0","parentHash":"0x0000000000000000000000000000000000000000000000000000000000000000"}' > /eth/genesis.json
        echo '["enode://49f681391747cb6771e510f2512e9fec599ed526ade06df72dd0b7500aa4312d3a8a29a9bf901574a03a83835158e8ee68b38ab348d489601bb2b053dbd282d7@172.16.239.10:30303","enode://6d3fe7806fb71beb306058af7913ab8eae30b6073d1a433dd003592a2429b7c55734f08de694770f08fc15805e0120a0171b2576e49c142f27fb6bd09a5a751d@172.16.239.11:30303","enode://daacd768d1e7bcb7c6793d06287a4e2ff0db4ddff2c21a031619d689c76b053379d84b9a406605c5d0c1a80e8b0c34393f9ae0a54c54e0c6ee70bc8c8478cccd@172.16.239.12:30303","enode://4b273954e7654e95c4e04eca2253a3d40597b66c5a0ec7df01ef606d723faa104ce91f44888b9fa71d0ad15d1cc1064ed94f4af2791d49af376af3765b96999d@172.16.239.13:30303","enode://38c3fa5b70e8f11225bc318ae1ed32dbb544d08a272b4ef527848c259f50cc325e77ccbb291a5a4f7929569e9a62e1d660b269c767cbb76ebef538ba11b98f6e@172.16.239.14:30303","enode://087a9400c4a11c2a92444e013fb3b64b0942cb782c3e73be1561f3e55e46573e5d7049e9947d55a325ad92b8f5d32c86c9a6571d17b5459bc2b39e59bfa70d03@172.16.239.15:30303","enode://85eb8265885217cd91f435e598dcd2dd6bfe3656feed38854e687ecba208aacb1b7a7ff11a06ee10bf6451db0a7f169aee83f3972bb049ca233e8cf6fdcad904@172.16.239.16:30303"]' > /eth/geth/static-nodes.json
        geth --datadir "/eth" --nousb init "/eth/genesis.json"
        /run.sh
  ibetforfin-validator-3:
    hostname: ibetforfin-validator-3
    build:
      context: .
    ports:
      - '30306:30303'
      - '8548:8545'
    environment:
      - PRIVATE_CONFIG=ignore
      - rpccorsdomain=*
      - rpcvhosts=*
      - nodekeyhex=dcedf74eb81e18f28eddd1bb7b48b36b711c26e35619c0eca5e469a0828a22f1
    networks:
      app_net:
        ipv4_address: 172.16.239.13
    restart: always
    command:
      - /bin/sh
      - -c
      - |
        mkdir -p /eth/geth
        echo '{"config":{"chainId":1010032,"homesteadBlock":1,"eip150Block":2,"eip150Hash":"0x0000000000000000000000000000000000000000000000000000000000000000","eip155Block":3,"eip158Block":3,"byzantiumBlock":3,"istanbul":{"epoch":30000,"policy":0},"isQuorum":true},"nonce":"0x0","timestamp":"0x5f32810a","extraData":"0x0000000000000000000000000000000000000000000000000000000000000000f8d9f893949a364aac9d797b74c35a25902615c94380d6637694c61f5a293daebd629f53ca54926a0d3c79620f2094f661459954850ac9474b8a169e88c8f6d756ba29942c77361907acc51636a37cf1548db5e136e00855946117a8bb871b5b2164c6f825ffcc0ddda9d54de0941a8769d6d5fc9f44c0862f2016ddd76d647b7daa94df7d8ab7cd322ae1a7e8794330471712d566b6f3b8410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c0","gasLimit":"0x2faf0800","difficulty":"0x1","mixHash":"0x63746963616c2062797a616e74696e65206661756c7420746f6c6572616e6365","coinbase":"0x0000000000000000000000000000000000000000","constantinopleBlock":0,"petersburgBlock":0,"istanbulBlock":0,"alloc":{"1a8769d6d5fc9f44c0862f2016ddd76d647b7daa":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"2c77361907acc51636a37cf1548db5e136e00855":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"6117a8bb871b5b2164c6f825ffcc0ddda9d54de0":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"9a364aac9d797b74c35a25902615c94380d66376":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"c61f5a293daebd629f53ca54926a0d3c79620f20":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"df7d8ab7cd322ae1a7e8794330471712d566b6f3":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"f661459954850ac9474b8a169e88c8f6d756ba29":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"}},"number":"0x0","gasUsed":"0x0","parentHash":"0x0000000000000000000000000000000000000000000000000000000000000000"}' > /eth/genesis.json
        echo '["enode://49f681391747cb6771e510f2512e9fec599ed526ade06df72dd0b7500aa4312d3a8a29a9bf901574a03a83835158e8ee68b38ab348d489601bb2b053dbd282d7@172.16.239.10:30303","enode://6d3fe7806fb71beb306058af7913ab8eae30b6073d1a433dd003592a2429b7c55734f08de694770f08fc15805e0120a0171b2576e49c142f27fb6bd09a5a751d@172.16.239.11:30303","enode://daacd768d1e7bcb7c6793d06287a4e2ff0db4ddff2c21a031619d689c76b053379d84b9a406605c5d0c1a80e8b0c34393f9ae0a54c54e0c6ee70bc8c8478cccd@172.16.239.12:30303","enode://4b273954e7654e95c4e04eca2253a3d40597b66c5a0ec7df01ef606d723faa104ce91f44888b9fa71d0ad15d1cc1064ed94f4af2791d49af376af3765b96999d@172.16.239.13:30303","enode://38c3fa5b70e8f11225bc318ae1ed32dbb544d08a272b4ef527848c259f50cc325e77ccbb291a5a4f7929569e9a62e1d660b269c767cbb76ebef538ba11b98f6e@172.16.239.14:30303","enode://087a9400c4a11c2a92444e013fb3b64b0942cb782c3e73be1561f3e55e46573e5d7049e9947d55a325ad92b8f5d32c86c9a6571d17b5459bc2b39e59bfa70d03@172.16.239.15:30303","enode://85eb8265885217cd91f435e598dcd2dd6bfe3656feed38854e687ecba208aacb1b7a7ff11a06ee10bf6451db0a7f169aee83f3972bb049ca233e8cf6fdcad904@172.16.239.16:30303"]' > /eth/geth/static-nodes.json
        geth --datadir "/eth" --nousb init "/eth/genesis.json"
        /run.sh
  ibetforfin-validator-4:
    hostname: ibetforfin-validator-4
    build:
      context: .
    ports:
      - '30307:30303'
      - '8549:8545'
    environment:
      - PRIVATE_CONFIG=ignore
      - rpccorsdomain=*
      - rpcvhosts=*
      - nodekeyhex=73fae95970a721bf99ea17c3ff546e0edc2a0423f91fe3879a98172c5cbaf77c
    networks:
      app_net:
        ipv4_address: 172.16.239.14
    restart: always
    command:
      - /bin/sh
      - -c
      - |
        mkdir -p /eth/geth
        echo '{"config":{"chainId":1010032,"homesteadBlock":1,"eip150Block":2,"eip150Hash":"0x0000000000000000000000000000000000000000000000000000000000000000","eip155Block":3,"eip158Block":3,"byzantiumBlock":3,"istanbul":{"epoch":30000,"policy":0},"isQuorum":true},"nonce":"0x0","timestamp":"0x5f32810a","extraData":"0x0000000000000000000000000000000000000000000000000000000000000000f8d9f893949a364aac9d797b74c35a25902615c94380d6637694c61f5a293daebd629f53ca54926a0d3c79620f2094f661459954850ac9474b8a169e88c8f6d756ba29942c77361907acc51636a37cf1548db5e136e00855946117a8bb871b5b2164c6f825ffcc0ddda9d54de0941a8769d6d5fc9f44c0862f2016ddd76d647b7daa94df7d8ab7cd322ae1a7e8794330471712d566b6f3b8410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c0","gasLimit":"0x2faf0800","difficulty":"0x1","mixHash":"0x63746963616c2062797a616e74696e65206661756c7420746f6c6572616e6365","coinbase":"0x0000000000000000000000000000000000000000","constantinopleBlock":0,"petersburgBlock":0,"istanbulBlock":0,"alloc":{"1a8769d6d5fc9f44c0862f2016ddd76d647b7daa":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"2c77361907acc51636a37cf1548db5e136e00855":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"6117a8bb871b5b2164c6f825ffcc0ddda9d54de0":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"9a364aac9d797b74c35a25902615c94380d66376":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"c61f5a293daebd629f53ca54926a0d3c79620f20":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"df7d8ab7cd322ae1a7e8794330471712d566b6f3":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"f661459954850ac9474b8a169e88c8f6d756ba29":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"}},"number":"0x0","gasUsed":"0x0","parentHash":"0x0000000000000000000000000000000000000000000000000000000000000000"}' > /eth/genesis.json
        echo '["enode://49f681391747cb6771e510f2512e9fec599ed526ade06df72dd0b7500aa4312d3a8a29a9bf901574a03a83835158e8ee68b38ab348d489601bb2b053dbd282d7@172.16.239.10:30303","enode://6d3fe7806fb71beb306058af7913ab8eae30b6073d1a433dd003592a2429b7c55734f08de694770f08fc15805e0120a0171b2576e49c142f27fb6bd09a5a751d@172.16.239.11:30303","enode://daacd768d1e7bcb7c6793d06287a4e2ff0db4ddff2c21a031619d689c76b053379d84b9a406605c5d0c1a80e8b0c34393f9ae0a54c54e0c6ee70bc8c8478cccd@172.16.239.12:30303","enode://4b273954e7654e95c4e04eca2253a3d40597b66c5a0ec7df01ef606d723faa104ce91f44888b9fa71d0ad15d1cc1064ed94f4af2791d49af376af3765b96999d@172.16.239.13:30303","enode://38c3fa5b70e8f11225bc318ae1ed32dbb544d08a272b4ef527848c259f50cc325e77ccbb291a5a4f7929569e9a62e1d660b269c767cbb76ebef538ba11b98f6e@172.16.239.14:30303","enode://087a9400c4a11c2a92444e013fb3b64b0942cb782c3e73be1561f3e55e46573e5d7049e9947d55a325ad92b8f5d32c86c9a6571d17b5459bc2b39e59bfa70d03@172.16.239.15:30303","enode://85eb8265885217cd91f435e598dcd2dd6bfe3656feed38854e687ecba208aacb1b7a7ff11a06ee10bf6451db0a7f169aee83f3972bb049ca233e8cf6fdcad904@172.16.239.16:30303"]' > /eth/geth/static-nodes.json
        geth --datadir "/eth" --nousb init "/eth/genesis.json"
        /run.sh
  ibetforfin-validator-5:
    hostname: ibetforfin-validator-5
    build:
      context: .
    ports:
      - '30308:30303'
      - '8550:8545'
    environment:
      - PRIVATE_CONFIG=ignore
      - rpccorsdomain=*
      - rpcvhosts=*
      - nodekeyhex=1ae952314348d2d83a6420ed279323b8b4c2c7c5e6ef5c737255fd2e5644afb7
    networks:
      app_net:
        ipv4_address: 172.16.239.15
    restart: always
    command:
      - /bin/sh
      - -c
      - |
        mkdir -p /eth/geth
        echo '{"config":{"chainId":1010032,"homesteadBlock":1,"eip150Block":2,"eip150Hash":"0x0000000000000000000000000000000000000000000000000000000000000000","eip155Block":3,"eip158Block":3,"byzantiumBlock":3,"istanbul":{"epoch":30000,"policy":0},"isQuorum":true},"nonce":"0x0","timestamp":"0x5f32810a","extraData":"0x0000000000000000000000000000000000000000000000000000000000000000f8d9f893949a364aac9d797b74c35a25902615c94380d6637694c61f5a293daebd629f53ca54926a0d3c79620f2094f661459954850ac9474b8a169e88c8f6d756ba29942c77361907acc51636a37cf1548db5e136e00855946117a8bb871b5b2164c6f825ffcc0ddda9d54de0941a8769d6d5fc9f44c0862f2016ddd76d647b7daa94df7d8ab7cd322ae1a7e8794330471712d566b6f3b8410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c0","gasLimit":"0x2faf0800","difficulty":"0x1","mixHash":"0x63746963616c2062797a616e74696e65206661756c7420746f6c6572616e6365","coinbase":"0x0000000000000000000000000000000000000000","constantinopleBlock":0,"petersburgBlock":0,"istanbulBlock":0,"alloc":{"1a8769d6d5fc9f44c0862f2016ddd76d647b7daa":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"2c77361907acc51636a37cf1548db5e136e00855":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"6117a8bb871b5b2164c6f825ffcc0ddda9d54de0":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"9a364aac9d797b74c35a25902615c94380d66376":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"c61f5a293daebd629f53ca54926a0d3c79620f20":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"df7d8ab7cd322ae1a7e8794330471712d566b6f3":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"f661459954850ac9474b8a169e88c8f6d756ba29":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"}},"number":"0x0","gasUsed":"0x0","parentHash":"0x0000000000000000000000000000000000000000000000000000000000000000"}' > /eth/genesis.json
        echo '["enode://49f681391747cb6771e510f2512e9fec599ed526ade06df72dd0b7500aa4312d3a8a29a9bf901574a03a83835158e8ee68b38ab348d489601bb2b053dbd282d7@172.16.239.10:30303","enode://6d3fe7806fb71beb306058af7913ab8eae30b6073d1a433dd003592a2429b7c55734f08de694770f08fc15805e0120a0171b2576e49c142f27fb6bd09a5a751d@172.16.239.11:30303","enode://daacd768d1e7bcb7c6793d06287a4e2ff0db4ddff2c21a031619d689c76b053379d84b9a406605c5d0c1a80e8b0c34393f9ae0a54c54e0c6ee70bc8c8478cccd@172.16.239.12:30303","enode://4b273954e7654e95c4e04eca2253a3d40597b66c5a0ec7df01ef606d723faa104ce91f44888b9fa71d0ad15d1cc1064ed94f4af2791d49af376af3765b96999d@172.16.239.13:30303","enode://38c3fa5b70e8f11225bc318ae1ed32dbb544d08a272b4ef527848c259f50cc325e77ccbb291a5a4f7929569e9a62e1d660b269c767cbb76ebef538ba11b98f6e@172.16.239.14:30303","enode://087a9400c4a11c2a92444e013fb3b64b0942cb782c3e73be1561f3e55e46573e5d7049e9947d55a325ad92b8f5d32c86c9a6571d17b5459bc2b39e59bfa70d03@172.16.239.15:30303","enode://85eb8265885217cd91f435e598dcd2dd6bfe3656feed38854e687ecba208aacb1b7a7ff11a06ee10bf6451db0a7f169aee83f3972bb049ca233e8cf6fdcad904@172.16.239.16:30303"]' > /eth/geth/static-nodes.json
        geth --datadir "/eth" --nousb init "/eth/genesis.json"
        /run.sh
  ibetforfin-validator-6:
    hostname: ibetforfin-validator-6
    build:
      context: .
    ports:
      - '30309:30303'
      - '8551:8545'
    environment:
      - PRIVATE_CONFIG=ignore
      - rpccorsdomain=*
      - rpcvhosts=*
      - nodekeyhex=ed3d6cc1b3c7a91a70a48d9cfd6ca8989408e6a5b8af9335a021541a6b074ff3
    networks:
      app_net:
        ipv4_address: 172.16.239.16
    restart: always
    command:
      - /bin/sh
      - -c
      - |
        mkdir -p /eth/geth
        echo '{"config":{"chainId":1010032,"homesteadBlock":1,"eip150Block":2,"eip150Hash":"0x0000000000000000000000000000000000000000000000000000000000000000","eip155Block":3,"eip158Block":3,"byzantiumBlock":3,"istanbul":{"epoch":30000,"policy":0},"isQuorum":true},"nonce":"0x0","timestamp":"0x5f32810a","extraData":"0x0000000000000000000000000000000000000000000000000000000000000000f8d9f893949a364aac9d797b74c35a25902615c94380d6637694c61f5a293daebd629f53ca54926a0d3c79620f2094f661459954850ac9474b8a169e88c8f6d756ba29942c77361907acc51636a37cf1548db5e136e00855946117a8bb871b5b2164c6f825ffcc0ddda9d54de0941a8769d6d5fc9f44c0862f2016ddd76d647b7daa94df7d8ab7cd322ae1a7e8794330471712d566b6f3b8410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c0","gasLimit":"0x2faf0800","difficulty":"0x1","mixHash":"0x63746963616c2062797a616e74696e65206661756c7420746f6c6572616e6365","coinbase":"0x0000000000000000000000000000000000000000","constantinopleBlock":0,"petersburgBlock":0,"istanbulBlock":0,"alloc":{"1a8769d6d5fc9f44c0862f2016ddd76d647b7daa":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"2c77361907acc51636a37cf1548db5e136e00855":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"6117a8bb871b5b2164c6f825ffcc0ddda9d54de0":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"9a364aac9d797b74c35a25902615c94380d66376":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"c61f5a293daebd629f53ca54926a0d3c79620f20":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"df7d8ab7cd322ae1a7e8794330471712d566b6f3":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"},"f661459954850ac9474b8a169e88c8f6d756ba29":{"balance":"0x446c3b15f9926687d2c40534fdb564000000000000"}},"number":"0x0","gasUsed":"0x0","parentHash":"0x0000000000000000000000000000000000000000000000000000000000000000"}' > /eth/genesis.json
        echo '["enode://49f681391747cb6771e510f2512e9fec599ed526ade06df72dd0b7500aa4312d3a8a29a9bf901574a03a83835158e8ee68b38ab348d489601bb2b053dbd282d7@172.16.239.10:30303","enode://6d3fe7806fb71beb306058af7913ab8eae30b6073d1a433dd003592a2429b7c55734f08de694770f08fc15805e0120a0171b2576e49c142f27fb6bd09a5a751d@172.16.239.11:30303","enode://daacd768d1e7bcb7c6793d06287a4e2ff0db4ddff2c21a031619d689c76b053379d84b9a406605c5d0c1a80e8b0c34393f9ae0a54c54e0c6ee70bc8c8478cccd@172.16.239.12:30303","enode://4b273954e7654e95c4e04eca2253a3d40597b66c5a0ec7df01ef606d723faa104ce91f44888b9fa71d0ad15d1cc1064ed94f4af2791d49af376af3765b96999d@172.16.239.13:30303","enode://38c3fa5b70e8f11225bc318ae1ed32dbb544d08a272b4ef527848c259f50cc325e77ccbb291a5a4f7929569e9a62e1d660b269c767cbb76ebef538ba11b98f6e@172.16.239.14:30303","enode://087a9400c4a11c2a92444e013fb3b64b0942cb782c3e73be1561f3e55e46573e5d7049e9947d55a325ad92b8f5d32c86c9a6571d17b5459bc2b39e59bfa70d03@172.16.239.15:30303","enode://85eb8265885217cd91f435e598dcd2dd6bfe3656feed38854e687ecba208aacb1b7a7ff11a06ee10bf6451db0a7f169aee83f3972bb049ca233e8cf6fdcad904@172.16.239.16:30303"]' > /eth/geth/static-nodes.json
        geth --datadir "/eth" --nousb init "/eth/genesis.json"
        /run.sh
  epirus-api:
    image: web3labs/epirus-free-api:latest
    environment:
      - NODE_ENDPOINT=http://ibetforfin-validator-0:8545
      - MONGO_CLIENT_URI=mongodb://epirus-mongodb:27017
      - REINDEX_ENDPOINT=http://epirus-ingestion/reindex/
      - MONGO_DB_NAME=epirus
    depends_on:
      - epirus-mongodb
      - ibetforfin-validator-0
    networks:
      app_net:
        ipv4_address: 172.16.239.20
  epirus-mongodb:
    image: mongo:latest
    entrypoint: mongod --logpath=/dev/null --bind_ip "0.0.0.0"
    networks:
      app_net:
        ipv4_address: 172.16.239.21
  epirus-web:
    image: web3labs/epirus-free-web:latest
    ports:
      - 3000:3000
    environment:
      - API_URL=/api
      - NEW_RELIC_LICENSE_KEY=dummy
    depends_on:
      - epirus-api
    networks:
      app_net:
        ipv4_address: 172.16.239.22
  epirus-ingestion:
    image: web3labs/epirus-free-ingestion:latest
    environment:
      - NODE_ENDPOINT=http://ibetforfin-validator-0:8545
      - MONGO_CLIENT_URI=mongodb://epirus-mongodb:27017
      - MONGO_DB_NAME=epirus
    depends_on:
      - epirus-mongodb
      - ibetforfin-validator-0
    networks:
      app_net:
        ipv4_address: 172.16.239.23
  epirus-nginx:
    image: nginx:latest
    ports:
      - 8080:80
    depends_on:
      - epirus-api
      - epirus-web
    networks:
      app_net:
        ipv4_address: 172.16.239.24
    entrypoint:
      - /bin/sh
      - -c
      - |
        cat <<'EOF' > /etc/nginx/nginx.conf
        events { }
        http {
          server {
            listen 80;
            charset utf-8;
            location /api/ {
              proxy_pass http://epirus-api:8090/;
            }
            location / {
              proxy_pass http://epirus-web:3000/;
            }
          }
        }
        EOF
        nginx -g "daemon off;" 
networks:
  app_net:
    driver: bridge
    ipam:
      driver: default
      config:
        - subnet: 172.16.239.0/24
